<section class="downloads">
    <div class="container">
        <h1>Download Nuclear</h1>
        <p class="subtitle">Free and open source music streaming, available for all platforms</p>

        <!-- OS Selection Buttons -->
        <div class="os-selection">
            <input type="radio" id="mac-select" name="os-choice" class="os-radio" checked>
            <input type="radio" id="linux-select" name="os-choice" class="os-radio">
            <input type="radio" id="windows-select" name="os-choice" class="os-radio">

            <div class="os-buttons">
                <label for="mac-select" class="os-button">
                    {% include svg/apple.svg %}
                    <span>macOS</span>
                </label>

                <label for="linux-select" class="os-button">
                    {% include svg/linux.svg %}
                    <span>Linux</span>
                </label>

                <label for="windows-select" class="os-button">
                    {% include svg/windows.svg %}
                    <span>Windows</span>
                </label>
            </div>

            <!-- Download Content Areas -->
            <div class="download-areas">
                <!-- macOS Downloads -->
                <div class="download-area" id="mac-downloads">
                    <div class="box mac-box">
                        <div class="mac-content">
                            <div class="download-group left">
                                <div class="version-badge">Latest Release: v0.6.48</div>

                                <h4>Apple Silicon (M1/M2/M3)</h4>
                                <div class="download-links">
                                    <a target="_blank" rel="noreferrer"
                                        href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-arm64.dmg">
                                        <img
                                            src="https://img.shields.io/badge/Download-Apple_Silicon-blue?style=for-the-badge&logo=apple&logoColor=white" />
                                    </a>
                                </div>

                                <h4>Intel Processor</h4>
                                <div class="download-links">
                                    <a target="_blank" rel="noreferrer"
                                        href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-x64.dmg">
                                        <img
                                            src="https://img.shields.io/badge/Download-Intel_Mac-blue?style=for-the-badge&logo=apple&logoColor=white" />
                                    </a>
                                </div>
                            </div>

                            <div class="download-group right">
                                <div class="mac-instructions">
                                    <h4>⚠️ Installation Instructions</h4>
                                    <ol>
                                        <li>After downloading, open Terminal</li>
                                        <li>Remove quarantine attribute:
                                            <code>sudo xattr -r -d com.apple.quarantine /Applications/Nuclear.app
                                                <button class="copy-button" onclick="copyToClipboard(this, 'sudo xattr -r -d com.apple.quarantine /Applications/Nuclear.app')">
                                                    {% include svg/copy.svg %}
                                                </button>
                                            </code>
                                        </li>
                                        <li>If still blocked:
                                            <ul>
                                                <li>Go to System Preferences → Security & Privacy</li>
                                                <li>Click "Open Anyway" next to Nuclear</li>
                                            </ul>
                                        </li>
                                        <li>For persistent issues:
                                            <code>sudo spctl --master-disable
                                                <button class="copy-button" onclick="copyToClipboard(this, 'sudo spctl --master-disable')">
                                                    {% include svg/copy.svg %}
                                                </button>
                                            </code>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Linux Downloads -->
                <div class="download-area" id="linux-downloads">
                    <div class="box">
                        <div class="version-badge">Latest Release: v0.6.48</div>
                        <div class="download-group">
                            <h4>Universal Install (Recommended)</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-x86_64.AppImage">
                                    <img
                                        src="https://img.shields.io/badge/Download-AppImage-blue?style=for-the-badge&logo=linux&logoColor=white" />
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://flathub.org/apps/org.js.nuclear.Nuclear">
                                    <img
                                        src="https://img.shields.io/badge/Download-Flathub-blue?style=for-the-badge&logo=flathub&logoColor=white" />
                                </a>
                            </div>

                            <h4>Distribution-specific Packages</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-amd64.deb">
                                    <img
                                        src="https://img.shields.io/badge/Download-DEB-blue?style=for-the-badge&logo=debian&logoColor=white" />
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-x86_64.rpm">
                                    <img
                                        src="https://img.shields.io/badge/Download-RPM-blue?style=for-the-badge&logo=redhat&logoColor=white" />
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://aur.archlinux.org/packages/nuclear-player-bin">
                                    <img
                                        src="https://img.shields.io/badge/Download-AUR-blue?style=for-the-badge&logo=archlinux&logoColor=white" />
                                </a>
                            </div>

                            <h4>Additional Formats</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-amd64.snap">
                                    <img
                                        src="https://img.shields.io/badge/Download-Snap-blue?style=for-the-badge&logo=snapcraft&logoColor=white" />
                                </a>
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-x64.tar.gz">
                                    <img
                                        src="https://img.shields.io/badge/Download-Tarball-blue?style=for-the-badge&logo=linux&logoColor=white" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Windows Downloads -->
                <div class="download-area" id="windows-downloads">
                    <div class="box">
                        <div class="version-badge">Latest Release: v0.6.48</div>
                        <div class="download-group">
                            <h4>Easy Install (Recommended)</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear.Setup.0.6.48.exe">
                                    <img
                                        src="https://img.shields.io/badge/Download-Installer-blue?style=for-the-badge&logo=windows&logoColor=white" />
                                </a>
                            </div>

                            <h4>Portable Version</h4>
                            <div class="download-links">
                                <a target="_blank" rel="noreferrer"
                                    href="https://github.com/nukeop/nuclear/releases/download/v0.6.48/nuclear-v0.6.48-x64.exe">
                                    <img
                                        src="https://img.shields.io/badge/Download-Portable-blue?style=for-the-badge&logo=windows&logoColor=white" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security & Verification Section -->
        <div class="security-section">
            <div class="box">
                <h3>🔒 Security & Verification</h3>
                <p>Verify the authenticity of your download by checking the file hash:</p>

                <div class="hash-grid">
                    <div class="hash-row">
                        <div class="file-name">nuclear-v0.6.48-arm64.dmg</div>
                        <div class="hash-data">
                            <span class="hash-type">SHA256:</span>
                            <span
                                class="hash-value">e8b98f739fd7b8e3a8f9f891c08721d2a6c6e4c2d0b3f5c9a1e9b8d7f6e5d4c3</span>
                        </div>
                    </div>
                    <div class="hash-row">
                        <div class="file-name">nuclear-v0.6.48-x64.dmg</div>
                        <div class="hash-data">
                            <span class="hash-type">SHA256:</span>
                            <span
                                class="hash-value">d4c3b2a1e9f8d7b6e5c4a3b2a1e9f8d7b6e5c4a3b2a1e9f8d7b6e5c4a3b2a1e9</span>
                        </div>
                    </div>
                </div>

                <div class="verification-steps">
                    <h4>How to verify:</h4>
                    <ol>
                        <li>On macOS/Linux: Open Terminal and run <code>shasum -a 256 path/to/file</code></li>
                        <li>On Windows: Open PowerShell and run <code>Get-FileHash path/to/file -Algorithm SHA256</code>
                        </li>
                        <li>Compare the output with the hash above</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Contributors Section -->
        <div class="contributors">
            <h3>Built by the community</h3>
            <p>Nuclear is developed by open source enthusiasts worldwide</p>
            <div class="contributors-grid" id="contributors-grid">
                <!-- Contributors will be loaded via JavaScript -->
            </div>
            <a href="https://github.com/nukeop/nuclear/graphs/contributors" class="view-all" target="_blank"
                rel="noreferrer">
                View all contributors →
            </a>
        </div>

        <!-- Stats Section -->
        <div class="stats">
            <div class="stat-item">
                <span class="number">90,000+</span>
                <span class="label">Tracks in database</span>
            </div>
            <div class="stat-item">
                <span class="number">12,500+</span>
                <span class="label">GitHub Stars</span>
            </div>
            <div class="stat-item">
                <span class="number">100%</span>
                <span class="label">Free & Open Source</span>
            </div>
        </div>

        <div class="guide">
            <h2>Need help?</h2>
            <div class="buttons">
                <a class="faq" target="_blank" rel="noreferrer" href="https://nukeop.gitbook.io/nuclear/">
                    Read User Guide
                </a>
                <a class="soc-button" href="https://discord.gg/JqPjKxE" rel="me">
                    {% include svg/discord.svg %} Join Discord
                </a>
            </div>
        </div>
    </div>
</section>

<script>
    function copyToClipboard(button, text) {
        navigator.clipboard.writeText(text).then(function () {
            button.classList.add('copied');
            const originalIcon = button.innerHTML;
            button.innerHTML = '✓';

            setTimeout(() => {
                button.innerHTML = originalIcon;
                button.classList.remove('copied');
            }, 1500);
        }).catch(function (err) {
            console.error('Failed to copy:', err);
        });
    }

    // Fetch contributors
    fetch('https://api.github.com/repos/nukeop/nuclear/contributors?per_page=10')
        .then(res => res.json())
        .then(contributors => {
            const grid = document.getElementById('contributors-grid');
            contributors.forEach(contributor => {
                const link = document.createElement('a');
                link.href = contributor.html_url;
                link.className = 'contributor';
                link.target = '_blank';
                link.rel = 'noreferrer';

                const img = document.createElement('img');
                img.src = contributor.avatar_url;
                img.alt = `${contributor.login}'s avatar`;
                img.loading = 'lazy';

                link.appendChild(img);
                grid.appendChild(link);
            });
        })
        .catch(console.error);
</script>